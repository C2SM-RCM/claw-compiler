# TODO move dependencies ...
set(CMAKE_JAVA_INCLUDE_PATH ../../../omni-compiler/XcodeML-Common/build/om-common.jar ../../../omni-compiler/XcodeML-Exc-Tools/build/om-exc-tools.jar )
#set(CMAKE_JAVA_INCLUDE_PATH ${OMNI_JAR_COMMON} ${OMNI_JAR_TOOLS})
set(CMAKE_JAVA_COMPILE_FLAGS -Xlint:unchecked)


add_jar(${OMNI_CX2X_NAME}
# Base class
  cx2x/Cx2x.java

# xobject package
  cx2x/translator/xobject/CLAWblockVisitor.java
  cx2x/translator/xobject/CLAWglobalDecl.java
  cx2x/translator/xobject/CLAWtranslator.java

# Pragma package
  cx2x/translator/pragma/CLAWanalyzeLocalPragma.java
  cx2x/translator/pragma/CLAWanalyzePragma.java
  cx2x/translator/pragma/CLAWpragma.java
  cx2x/translator/pragma/CLAWmapping.java

# XcodeML package
  cx2x/translator/ClawXcodeMlTranslator.java

# XcodeML.transformation package
  cx2x/translator/transformation/DependentTransformationGroup.java
  cx2x/translator/transformation/IndependentTransformationGroup.java
  cx2x/translator/transformation/LoopFusion.java
  cx2x/translator/transformation/LoopInterchange.java
  cx2x/translator/transformation/LoopExtraction.java
  cx2x/translator/transformation/Transformation.java
  cx2x/translator/transformation/TransformationGroup.java
  cx2x/translator/transformation/UtilityRemove.java

# XcodeML.transformer
  cx2x/translator/transformer/ClawTransformer.java
  cx2x/translator/transformer/Transformer.java

# XcodeML.Xelement package
  cx2x/xcodeml/xelement/XanalysisError.java
  cx2x/xcodeml/xelement/XargumentsTable.java
  cx2x/xcodeml/xelement/XarrayConstructor.java
  cx2x/xcodeml/xelement/XarrayIndex.java
  cx2x/xcodeml/xelement/XarrayRef.java
  cx2x/xcodeml/xelement/XbaseElement.java
  cx2x/xcodeml/xelement/XbaseExpr.java
  cx2x/xcodeml/xelement/XbasicType.java
  cx2x/xcodeml/xelement/Xbody.java
  cx2x/xcodeml/xelement/Xbound.java
  cx2x/xcodeml/xelement/XcharacterConstant.java
  cx2x/xcodeml/xelement/Xclonable.java
  cx2x/xcodeml/xelement/XcodeProg.java
  cx2x/xcodeml/xelement/XcomplexConstant.java
  cx2x/xcodeml/xelement/Xcondition.java
  cx2x/xcodeml/xelement/Xconstant.java
  cx2x/xcodeml/xelement/XconstType.java
  cx2x/xcodeml/xelement/XdeclTable.java
  cx2x/xcodeml/xelement/XdoStatement.java
  cx2x/xcodeml/xelement/Xelse.java
  cx2x/xcodeml/xelement/XexprModel.java
  cx2x/xcodeml/xelement/XelementHelper.java
  cx2x/xcodeml/xelement/XelementName.java
  cx2x/xcodeml/xelement/Xfct.java
  cx2x/xcodeml/xelement/XfctDef.java
  cx2x/xcodeml/xelement/XfctCall.java
  cx2x/xcodeml/xelement/XfctType.java
  cx2x/xcodeml/xelement/XglobalSymbolTable.java
  cx2x/xcodeml/xelement/Xid.java
  cx2x/xcodeml/xelement/XifStatement.java
  cx2x/xcodeml/xelement/XindexRange.java
  cx2x/xcodeml/xelement/XintConstant.java
  cx2x/xcodeml/xelement/Xkind.java
  cx2x/xcodeml/xelement/Xlength.java
  cx2x/xcodeml/xelement/XlogicalConstant.java
  cx2x/xcodeml/xelement/XloopIterationRange.java
  cx2x/xcodeml/xelement/XlowerBound.java
  cx2x/xcodeml/xelement/Xname.java
  cx2x/xcodeml/xelement/XrealConstant.java
  cx2x/xcodeml/xelement/Xscope.java
  cx2x/xcodeml/xelement/Xstep.java
  cx2x/xcodeml/xelement/XstructConstructor.java
  cx2x/xcodeml/xelement/XsymbolTable.java
  cx2x/xcodeml/xelement/Xthen.java
  cx2x/xcodeml/xelement/Xtype.java
  cx2x/xcodeml/xelement/XtypeTable.java
  cx2x/xcodeml/xelement/XupperBound.java
  cx2x/xcodeml/xelement/Xvalue.java
  cx2x/xcodeml/xelement/Xvar.java
  cx2x/xcodeml/xelement/XvarDecl.java
  cx2x/xcodeml/xelement/XvarRef.java

# XcodeML.Xelement.Exception package
  cx2x/translator/exception/IllegalTransformationException.java

  OUTPUT_DIR ${PROJECT_BINARY_DIR}/build
)

install(FILES ${PROJECT_BINARY_DIR}/build/${OMNI_CX2X_NAME}.jar DESTINATION ${CMAKE_INSTALL_PREFIX}/share/ccx2x/)
